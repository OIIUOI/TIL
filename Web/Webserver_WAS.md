# 웹서버

> 컴퓨터를 서버컴퓨터로 만들어주는 소프트웨어
> 
> 웹서버가 서버컴퓨터의 지정된 디렉토리의 html,css,javascript 등 
> 
> 브라우저에서 읽을 수 있는 파일을 
> 
> 웹사이트의 주소에 접속하면 
> 
> 클라이언트에게 파일 보내주는 역할을 함
> 
> ex) 아파치, NginX, IIS



- 파일 송신 뿐만 아니라 동적웹 프로그래밍 기능도 함
  
  Apache + PHP + MySQL = APM
  
  아파치에 PHP 해석할 수 있는 모듈 세팅해놓으면 웹 접근이 있을때마다 PHP 코드대로 MySQL의 데이터를 가져와서 동적웹을 만들어서 쏴줌 (NginX도 가능) 
  
  복잡하게는 못함



# WAS(Web Application Server)

> 자바진영 안에서의 개념이긴 함
> 
> 동적웹을 가져올 때 데이터베이스에서 가져와서 html과 섞는 프로그래밍을 하고 난 뒤에 웹서버에게 줌

- 동적웹 프로그래밍 뿐만 아니라 파일송신도 하긴 함



# 웹서버, WAS 왜 쓰는가?

1. 로드밸런싱

2. 프록시
   
   - 어떤 웹 프레임워크든 앞단에 아파치나 NginX를 두는 게 보안 측면에서의 이유가 큼

3. 캐싱

이 외에도 was들이 정상 작동하는지, 서비스 안정적으로 제공하기 위한 다양한 기능 제공



- 프록시
  
  - ~을 대신한다
  
  - Forward proxy
    
    사용자들이 사이트 접속할 때 프록시로 아이피 주소 숨김
  
  - Reverse proxy
    
    클라이언트에게서 서버의 정보를 감춤
    
    내부 구조를 감춤, 서버 내부적으로 파일들이 어느 폴더에 있는



- 로드밸런싱
  
  - 클라이언트가 몰릴 때 여러 톰캣(WAS나 내부서버)에게 분산해서 주문을 넣음
  
  - 다수의 WAS 인스턴스로 서비스를 돌리고 이를 웹서버로 밸런싱함
    
    - 1개의 사이트에 WAS 왜 여러개 돌리나?
      
      - 지속성
        
        - 업데이트 했는데 와스 하나면 사용자가 업데이트 중에는 튕기니까 업데이트 되는 와스 말고 다른 와스 쓸 수 있게끔
      
      - 여러개의 인스턴스 돌리면 성능 좋음
        
        - 인스턴스 -> 프로그램이 돌아가고 있는 상태 (하나의 프로세스)



- 캐싱
  
  > 한 번 꺼내온 것들을 다시 꺼내오지 않게끔 가까운데 따로 모아놓은 것
  
  - reverse proxy 의 캐싱 기능  <- 지금은 웹서버의 캐싱기능을 말하는 거라서 이거임
    
    - (서버 관점)
      
      서버로 찾아오는 손님들이 자주, 반복적으로 찾을만한 리소스들을 데이터베이스까지 가지 않고 서버에 쌓아놓았다가 바로 내주는 것
  
  - forward proxy 의 캐싱기능
    
    - (사용자 관점) 
      
      한번 받아온 이미지가 프록시 서버에 있다가 다음 요청에 서버까지 안 가고 바로 받아 옴



| 웹서버와 WAS 역할 겹치긴 하지만 서로 특화된 분야가 있어서 <br/>보안 운영 잘하는 웹서버는 클라이언트로 파일 쏴주고 was 관리, <br/>동적웹은 WAS가 만듬 |
| ---------------------------------------------------------------------------------------------- |



# 아파치, NginX

## 아파치

- MPM (Multi Process mudul)
  
  - mpm_prefork
    
    - 클라이언트마다 프로세스를 생성
  
  - mpm_worker
    
    - 클라이언트마다 스레드를 생성
1. 컨텍스트 스위칭이 특징

2. 컴퓨터 자원을 많이 소모함



## NginX

- Event driven
  
  - 클라이언트가 사용할 이벤트가 중점
1. 성능이 뛰어남



성능과 가벼움 중시 - NginX

다양하고 검증된 기능필요 - 아파치
